<!DOCTYPE html>
<html>

<head>
    <title>Diamond Price Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1>Diamond Price Predictor</h1>
        <form id="diamond-form" class="mt-4">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="carat">Carat Weight</label>
                    <input type="number" class="form-control" id="carat" step="0.01" min="0.1" value="1.0" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="cut">Cut</label>
                    <select class="form-control" id="cut" required>
                        <option value="Ideal">Ideal</option>
                        <option value="Premium">Premium</option>
                        <option value="Very Good">Very Good</option>
                        <option value="Good">Good</option>
                        <option value="Fair">Fair</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="color">Color</label>
                    <select class="form-control" id="color" required>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="G">G</option>
                        <option value="H">H</option>
                        <option value="I">I</option>
                        <option value="J">J</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="clarity">Clarity</label>
                    <select class="form-control" id="clarity" required>
                        <option value="IF">IF</option>
                        <option value="VVS1">VVS1</option>
                        <option value="VVS2">VVS2</option>
                        <option value="VS1">VS1</option>
                        <option value="VS2">VS2</option>
                        <option value="SI1">SI1</option>
                        <option value="SI2">SI2</option>
                        <option value="I1">I1</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="depth">Depth %</label>
                    <input type="number" class="form-control" id="depth" step="0.1" value="61.5" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="table">Table %</label>
                    <input type="number" class="form-control" id="table" step="0.1" value="55.0" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="x">Length (mm)</label>
                    <input type="number" class="form-control" id="x" step="0.01" value="5.0" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="y">Width (mm)</label>
                    <input type="number" class="form-control" id="y" step="0.01" value="5.0" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="z">Depth (mm)</label>
                    <input type="number" class="form-control" id="z" step="0.01" value="3.0" required>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Get Price Estimate</button>
        </form>

        <div id="result" class="mt-4 d-none alert alert-success">
            <h3>Estimated Price: <span id="price"></span></h3>
        </div>
    </div>

    <script>
        document.getElementById('diamond-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            // Collect form data
            const formData = {
                carat: document.getElementById('carat').value,
                cut: document.getElementById('cut').value,
                color: document.getElementById('color').value,
                clarity: document.getElementById('clarity').value,
                depth: document.getElementById('depth').value,
                table: document.getElementById('table').value,
                x: document.getElementById('x').value,
                y: document.getElementById('y').value,
                z: document.getElementById('z').value
            };

            // Send request to API
            const response = await fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const result = await response.json();

            if (result.success) {
                document.getElementById('price').textContent = '$' + result.predicted_price.toLocaleString();
                document.getElementById('result').classList.remove('d-none');
            } else {
                alert('Error: ' + result.error);
            }
        });
    </script>
</body>

</html>